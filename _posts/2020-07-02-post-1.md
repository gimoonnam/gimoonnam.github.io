---
title: "Image blur using openCV"
date: 2020-7-1 12:32:28 -0400
categories: OpenCV
tags:
  -openCV 
use_math: true
---

이미지 블러링은 이미지 처리나 컴퓨터 비전에 사용되는 기본적인 이미지 변형 방법이다. 이것은 이미지에 필터의 합성(2D convolution)을 통해 이뤄진다. 
즉, 원본 이미지 보다 크기가 작은 필터를 이미지 전체에 걸쳐 이동하며 원본 이미지의 픽셀값을 바꾼다. 
블러링은 노이즈를 제거하는데 유용한 방법이며, 이미지를 좀 더 매끈하게(smoothing) 하게 보이도록 만드는 효과를 낸다. 

이미지 상에서 픽셀의 값은 공간적으로 느리게 변한다. 따라서 픽셀간의 상관관계 (correlation)가 크다. 
이를 slow spatial variation이라고 한다. 이것이 이미지에서 시그널(signal)에 해당한다. 반면, 노이즈는 픽셀간의 상관관계가 없다. 즉, 노이즈는 이미지에서 어떤 패턴도 나타내지 않는다.


이 노이즈를 제거하는 효과적인 방법은 바로 평균을 내는 것이다. 노이즈는 서로 상관관계가 아주 약하기 때문에 평균을 내면 0으로 수렴하게 된다. 이를 통해 이미지의 시그널을 상대적으로 부각시킬 수 있다. 

대부분의 이미지 블러링 알고리즘은 픽셀값의 평균을 낸다. 평균을 내는 방식이 단순한 산술 평균이냐 아니면 가중치를 고려한 평균이냐에 따라 방법이 다양하게 나뉜다. 


이 포스팅에서는 openCV에서 제공하는 4가지 방법의 블러링을 해보도록 하겠다. 

 
1. Averaging 

2. Gaussian Blurring 

3. Median Blurring

4. Bilateral Filtering 

<div class="colorscripter-code" style="color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important;overflow:auto"><table class="colorscripter-code-table" style="margin:0;padding:0;border:none;background-color:#fafafa;border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px;border-right:2px solid #e5e5e5"><div style="margin:0;padding:0;word-break:normal;text-align:right;color:#666;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div></div></td><td style="padding:6px 0;text-align:left"><div style="margin:0;padding:0;color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a71d5d">import</span>&nbsp;cv2</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a71d5d">import</span>&nbsp;matplotlib.pyplot&nbsp;as&nbsp;plt</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">image&nbsp;<span style="color:#0086b3"></span><span style="color:#a71d5d">=</span>&nbsp;cv2.imread(<span style="color:#63a35c">'../images/lena.png'</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a71d5d">def</span>&nbsp;plotFigures(original_image,&nbsp;blurred_image):</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;plt.figure(figsize<span style="color:#0086b3"></span><span style="color:#a71d5d">=</span>(<span style="color:#0099cc">10</span>,<span style="color:#0099cc">10</span>))</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;plt.subplot(<span style="color:#0099cc">121</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;plt.imshow(cv2.cvtColor(original_image,cv2.COLOR_BGR2RGB))</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;plt.title(<span style="color:#63a35c">'Original'</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;plt.xticks([]),&nbsp;plt.yticks([])&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;plt.subplot(<span style="color:#0099cc">122</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;plt.imshow(cv2.cvtColor(blurred_image,cv2.COLOR_BGR2RGB))</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;plt.title(<span style="color:#63a35c">'Blurred'</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;plt.xticks([]),&nbsp;plt.yticks([])</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;plt.show()</div></div><div style="text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#e5e5e5text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom;padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none;color:white"><span style="font-size:9px;word-break:normal;background-color:#e5e5e5;color:white;border-radius:10px;padding:1px">cs</span></a></td></tr></table></div>

